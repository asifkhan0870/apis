<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LLM Results Dashboard</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background: #f4f7fb;
        font-family: "Inter", system-ui, sans-serif;
      }
      .card {
        border-radius: 16px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
        border: none;
      }
      .provider-badge {
        font-size: 0.75rem;
        padding: 6px 10px;
        border-radius: 999px;
      }
      .openai {
        background: #e7f5ff;
        color: #055160;
      }
      .cohere {
        background: #fff4e5;
        color: #663c00;
      }
      .anthropic {
        background: #f3e8ff;
        color: #4c1d95;
      }
      pre {
        white-space: pre-wrap;
        word-break: break-word;
        background: #fafafa;
        padding: 12px;
        border-radius: 12px;
        font-size: 0.9rem;
      }
    </style>
  </head>
  <body>
    <div class="container py-5">
      <div class="text-center mb-4">
        <h1 class="fw-bold">ðŸ¤– LLM Response Viewer</h1>
        <p class="text-muted">
          Compare real-time responses from multiple LLM providers
        </p>
      </div>

      <div class="card p-4 mb-4">
        <label class="form-label fw-semibold">Enter Prompt</label>
        <textarea
          id="prompt"
          class="form-control mb-3"
          rows="3"
          placeholder="Ask something..."
        ></textarea>
        <button class="btn btn-primary" onclick="queryLLMs()">Run Query</button>
      </div>

      <div id="results" class="row g-4"></div>
    </div>

    <script>
      async function queryLLMs() {
        const prompt = document.getElementById("prompt").value.trim();
        if (!prompt) return alert("Please enter a prompt");

        document.getElementById("results").innerHTML =
          '<p class="text-center text-muted">Loading results...</p>';

        const res = await fetch("http://localhost:4000/query-llms", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ prompt }),
        });

        const data = await res.json();
        renderResults(data.results);
      }

      function renderResults(results) {
        const container = document.getElementById("results");
        container.innerHTML = "";

        results.forEach((r) => {
          const providerClass = r.provider || "";
          const badgeClass = providerClass.includes("openai")
            ? "openai"
            : providerClass.includes("cohere")
            ? "cohere"
            : "anthropic";

          const card = document.createElement("div");
          card.className = "col-md-6";
          card.innerHTML = `
          <div class="card p-3 h-100">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <span class="provider-badge ${badgeClass}">${r.provider.toUpperCase()}</span>
              <small class="text-muted">${r.model || ""}</small>
            </div>
            <pre>${r.ok ? r.text : "Error fetching response"}</pre>
          </div>
        `;
          container.appendChild(card);
        });
      }
    </script>
  </body>
</html>
